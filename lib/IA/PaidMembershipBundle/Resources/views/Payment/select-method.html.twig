{# This Template is called with AJAX only. #}
<div>
    {% for key,method in paymentMethods %}
    <div class="form-group">
        <label>
            <input class="selectPaymentMethod" type="radio" name="paymentMethod" data-url="{{ path(method.route, {'planId': planId}) }}" value="{{ key }}" />
            {{ method.name }}
        </label>
    </div>
    {% endfor %} 

</div>
<fieldset id="paymentMethodOptions" style="min-height:100px; display:none">
    {#<legend>Payment Method Options</legend>#}
    <div id="boxPaymentMethodOptions" class="form-horizontal"></div>
</fieldset>

<script>
    $('.selectPaymentMethod').on('change', function() {
        var url = $(this).attr('data-url');
        var data = {'class': $(this).val()};
        $.get(url, data, function(data) {
            $('#boxPaymentMethodOptions').html(data);
            $('#paymentMethodOptions').show();
        });
    });
    
    $('form[name="ia_web_content_thief_project_processors"]').on('submit', function(e) {
        $.ajax({
            type: $(this).attr('method'),
            url: $(this).attr('action'),
            data: $(this).serialize(),
            success: function (data) {
                $('#boxProcessorOptions').html(data);
            }, 
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                $('#boxProcessorOptions').html('<p>FATAL ERROR!!!</p>' + $('#boxProcessorOptions').html());
            }
        });
        
        e.preventDefault();
    });
</script>
